\chapter{绪论}
近年来,随着传统手机逐渐被智能手机取代，搭载了智能操作系统（如iOS,Android,Windows Phone）的智能手机已经成为人们日常生活中集通信,娱乐游戏，商务办公，感知计算等于一体的移动个人终端平台。随着传感器工艺界的发展以及内置手机传感器种类的增加，如今智能手机已经能够基于传感器为用户提供良好的用户体验与服务，因此智能手机被科技赋予了更多的责任和角色，智能手机不仅仅是简单的日常通讯工具，还是能够在记录用户的日常活动轨迹，了解用户的使用习惯，为用户提供实时信息推荐，俨然已经成为了一种新型的可穿戴计算\upcite{starner1996human}的载体,随着传统社交方式逐渐转变为手机上的社交方式，借助现有的数据分析和数据挖掘技术，通过分析手机丰富的上下文信息（Context）来研究用户社交关系以及人与人之间的社会关系已经成为移动计算中一个研究热点。

\section{研究背景}

近年来,随着传统手机逐渐被智能手机取代，搭载了智能操作系统（如iOS,Android,Windows Phone）的智能手机已经成为人们日常生活中集通信，娱乐游戏，商务办公，感知计算等于一体的移动个人终端平台。通过丰富的内置传感器，我们可以收集到更加丰富的上下文信息（context）　分析出人与人之间的交互情况以及相似性\upcite{cheng2012inferring,eagle2006reality,min2013mining,pentland2009inferring}，通过用户轨迹数据分析用户的社交动态\upcite{zhang2011emergence}。关系强度在本文中表现为用户在现实生活中的亲密程度，通过掌握用户之间的关系强度有利于合理的拓展社交网络和提升社交质量。文献\cite{eagle2006reality}通过对手机传感器数据分析得出不同社会关系群组的用户在日常社交活动中的规律。CenceMe\upcite{miluzzo2007cenceme}通过收集智能手机传感器的上下文信息以及用户的社交应用(如Facebook，MySpace 和即时通讯工具Skype) 的使用信息，分析用户的位置、活动、情绪和周围环境并将所有信息通过社交应用来分析用户的社会交互情况但是并未根据社交情况去推测用户之间的社交关系等。Dartmouth 大学学者们的研究中\upcite{wang2014studentlife,wang2015smartgpa}，通过对班级48 名学生长达10 周所采集的手机传感器数据进行研究从中分析出学生之间的社交活动有助于减轻个人压力、保护精神健康和提升学业成绩的作用，研究人与人之间的社交活动和关系强度也因此具有重要的研究意义。美国社会学家格兰洛维特在研究过程中\upcite{granovetter1973strength}首次提出了关系强度这一概念，研究将关系强度分为强关系和弱关系。同时指明能够充当信息传递载体的纽带关系必定是弱关系，而强关系只是存在于那些你真正充分信任的人之间；强关系存在与和你更加相似的用户之间。Caroline\upcite{haythornthwaite2002strong}等进一步证实了用户交互的频率以及交互的持久度决定了用户之间的关系强度，如具有较高亲密度和交互频率用户之间的关系强度要高于偶然交互和非持久交互的用户。文献\cite{gustafson2012extracting,khadangi2013measuring,zhao2012relationship}基于在线社交网络(Facebook、Twitter、LinkedIn、Instagram 等) 利用社交数据、个人资料、状态互动等分析用户之间的亲密度，结合机器学习方法采用决策树算法、MLP 算法、SVM 算法等进行用户之间关系强度的预测以及分类。以上提及的研究大都是基于用户社交数据进行的关系强度计算研究，而基于智能手机收集的非社交的传感器数据进行人与人之间关系强度的度量仍是一个值得研究的问题。

\par 随着各种定位技术（如全球定位系统GPS和WLAN 和移动网络）的发展和内嵌的定位模块，通过智能手机可以准确的获取用户的位置信息，提供各种基于位置的服务（LBS），并将用户的活动以轨迹的形式记录下来。我们阅读了大量社会心理学相关的论文书籍，从中证实得到在现实生活中关系亲密的两个用户会更加倾向于一起进行面对面的交流、共同进行社交活动等，因此通过对手机传感器数据的处理分析能够从中挖掘出人们现实生活中的关系强度。文献\cite{zillmann2013selective} 立足于空间距离，提出了在空间距离上非常接近的人们在现实生活中就越可能发生面对面的交互，该文献通过调研一个小区的住户发现人们在现实生活中越是接近，就越容易成为朋友。文献\cite{zajonc1968attitudinal,zillmann2000mood}进一步通过研究用户的轨迹数据发现由于在空间距离中接近的用户在现实生活中更可能产生交互行为，也就是说拥有相似日常生活轨迹的用户更可能产生交互活动。郑宇\upcite{zheng2011recommending} 以及其他学者\upcite{lee2007trajectory,li2008mining,lu2011mining}尝试了基于用户轨迹计算用户相似性的研究，得出相似轨迹的用户更可能成为朋友，因此，针对相似用户进行朋友关系推荐。基于以上的理论基础和研究经验本文通过收集智能手机获取到的用户位置、WiFi、 蓝牙、通话记录等手机上下文数据，并且从这些数据中分析计算出现实生活中用户的交互位置、交互时间、交互频率以及交互的持续性等一系列能够反射出用户间关系强度的信息特征。

\par 目前智能手机增加了多种传感器用于实现更加丰富的用户交互功能，由以前单一的加速度传感器，距离传感器逐步集成了压力传感器，温度传感器，心率传感器等。这使得智能手机能够更加准确地感知到更加丰富多样的周围环境信息如：用户位置，社交通讯记录，WiFi和蓝牙连接记录等体现人与人之间交互情况以及轨迹交互情况等体现用户关系强度的数据，通过收集分析这些非社交数据，我们能够进一步得出人与人之间的关系相似性以及关系强度。


\section{研究现状}
\subsection{关系强度理论的研究现状}
Granovetter关于弱关系的研究奠定了社会关系强度理论的基础\upcite{granovetter1973strength}被认为是社会关系理论研究的开始的标志，紧接着Burt根据Granovetter的弱关系理论研究提出了结构洞理论
\upcite{burt2009structural}。Granovetter针对弱关系和强关系的度量方法提出了基于四种维度的度量准则，即用户之间的日常互动次数、人与人之间的亲密程度、双方投入感情的程度以及用户日常的交换程度，基于这四条衡量标准就可以将用户的关系强度划分为弱关系和强关系；在Wegner\upcite{carruthers2007illusion}的研究中，更是对这四种度量标准进行了进一步的研究推进，采用数值化来衡量四种维度的标准使得能够以指标数值化来区分强关系和弱关系；Muncer等\upcite{burrows2000virtual}提出并验证了用户的关系数量以及任意关系之间的交互频率对人与人之间的关系有影响；Paolillo\upcite{coles1999monoclonal}从日常用户交流的角度出发，发现人与人之间关系的亲密程度与日常交流中昵称使用的频率有关。随着研究的进一步深入，度量用户的关系强度逐步形成了基于感知用户的社交数据出发，以用户交互、亲密度等出发为度量标准的研究观点
\upcite{petroczi2007measuring}。
\subsection{基于智能手机感知数据的关系度量研究}
Hsu通过采集到的志愿者的手机日常WiFi数据\upcite{hsu2007mining}，将位置与WiFi信息关联起来得到用户的WiFi关联向量，并用关联向量来表示用户的行为轨迹，同时基于提出的AMVD模型用来计算人与人之间的距离，最后根据距离对社交关系进行聚类对社会关系进行划分，文中认为当连接过相同WiFi的情况下可以认为两个人在现实生活中有较强的社交关系。并且根据WiFi所对应的语义位置（如图书馆、教室、咖啡厅、会议室等）推测他们之间可能的社交关系。基于蓝牙感知信息，研究者通过分析手机收集的蓝牙数据对用户的社交圈进行划分，将用户的社交圈划分为室友，好朋友，工作伙伴等
\upcite{eagle2009inferring,zheng2013unsupervised,do2011groupus}。Mtibaa等\upcite{mtibaa2008you}通过收集分析了28位参加同一个计算机国际会议参会者的手机蓝牙数据，根据分析结果绘制了关于28位作者的社交网络关系图。
\subsection{基于用户移动轨迹数据的关系度量研究}
在现实生活空间中的用户交互能够更加直接的反映出社会关系的情况,如面对面的交流,共同用餐等，这些现实生活中的用户交互相对于用户的传统社交数据能够更加真实的反映出用户二者之间的关系。但是目前在这方面的研究还仅仅局限于某个局部的方面，文献\cite{ma2014effective}创造性的提出了根据用户的日常轨迹来衡量用户之间的关系强度，在研究中Ma 等人提出了一种根据多层基于用户轨迹的层级熵关系度量方法HERMA(Hierarchical Entropy-based Relationship Measurement Approach)，该模型根据手机收集的用户的GPS 位置轨迹信息进行处理，从用户轨迹中提取出共同的位置记录来推断用户之间的物理交互，进一步使用用户之间的物理交互来度量用户之间的社会关系强度，最后在仿真的数据集上进行验证。



\section{研究内容}
本研究课题针对如何通过智能手机所收集到的用户之间的非社交数据来计算度量人与人之间的社交关系强度展开了一系列的研究，寻求通过建立一个能够同时计算处理多种不同非社交数据源数据的用户关系度量框架。以此为基础来衡量用户之间的关系强度。经过前期的研究，决定将手机感知数据中的非社交关系数据（用户轨迹数据、用户蓝牙数据、用户WiFi数据）作为衡量用户关系强度的数据源。为了实现基于不同感数据多维度计算用户之间的关系强度，本文分别针对每一个独立数据源展开研究，最终采用集成学习的思路将结果进行融合。
\par (1)如何基于用户日常轨迹度量关系强度
\par 随着各种定位技术（如全球定位系统GPS和WLAN 和移动网络）的发展和内嵌的定位模块，通过智能手机可以准确的获取用户的位置信息，提供各种基于位置的服务（LBS），并将用户的活动以轨迹的形式记录下来。我们阅读了大量社会心理学相关的论文书籍，从中证实得到在现实生活中关系亲密的两个用户会更加倾向于一起进行面对面的交流、共同进行社交活动等，因此通过对手机传感器数据的处理分析能够从中挖掘出人们现实生活中的关系强度。在获取用户位置的过程中，其结果既可以由智能手机内置的GPS 传感器提供，还可以通过基站和WiFi 定位获取。用户的每一个位置点都是由一个三元组结构(Latitude,Longitude,Time) 组成的，用户在一段时间内连续的位置记录就构成了一条完整的连续轨迹。根据用户的日常语义轨迹，采用滤波技术手段剔除用户轨迹中的异常点，%同时利用轨迹预测算法对短时间窗口内的用户位置进行有效地补充。
针对用户的轨迹从不同维度出发，计算不同轨迹形态下用户之间的关系强度加以合并。
\par a) 基于空间轨迹的用户关系度量
\par  用户的空间轨迹中包含了一串由(Latitude,Longitude,Time)所组成的，寻找出用户空间轨迹中的特殊点即停留点，停留点\upcite{zheng2015trajectory}(Stay Point)在现实生活中并不是指用户轨迹中速度为零的点，而是由一组GPS点构成区域，表示用户在这段轨迹中在某一个区域停留的时间超过了设定的阈值。它比传统的GPS 位置点蕴含了更加重要的信息在，如该用户去过图书馆、体育馆等。因此用户的空间轨迹的距离现在一定程度上体现了用户之间的亲密关系，本文正是基于此尝试采用空间轨迹距离来度量人与人之间的社交关系强度。传统的距离计算主要使用欧氏距离、曼哈顿距离、马氏距离等。但是，在使用欧氏距离来度量用户空间轨迹的相似性过程中，轨迹之间的距离会受到轨迹长度的影响，导致结果出现较大偏差。通过结合传统语音识别算法DTW\upcite{itakura1987distance}，降低用户空间轨迹长度对计算结果的影响；考虑到DTW计算结果受到序列长度的影响，轨迹序列越长，得到的轨迹距离结果越大，因此对DTW计算结果采用合理的归一化处理以消除不同用户轨迹长度所带来的差异性影响。
\par b) 基于语义轨迹的用户关系度量
\par 基于空间轨迹的度量能够反映出用户在地理空间上的相遇或者相邻，基于语义轨迹的度量能够进一步得出用户之间的关系强度。借助自然语言处理思想，把用户每天的语义轨迹作为一条自然语句，用户所有时间段内的$n$ 条轨迹记录就生成了一篇文档，最后通过计算用户语义轨迹生成的文档之间的相似性来表示用户之间的关系强度。通过将语义标签作为分词后的结果，利用hash函数计算每个分词特征向量的hash值，然后根据词频对每个hash 特征向量进行加权合并，最后经过计算两条语义轨迹的海明距离即可表示为语义相似度。%比较了此方法和传统的主题模型以及word2vec 模型之间的性能和效率结果。
\par c) 基于日常轨迹模式的用户关系度量
\par 人们的日常活动具有很强的时间和空间的规律性，在计算用户相似度或者关系强度的研究中，还没有出现过从用户轨迹模式角度出发计算用户相似度和关系强度的研究。Gonzdlez等人通过对大量用户轨迹数据的分析发现用户在日常生活中常有规律的访问相似的路径，说明用户的轨迹运动模式能反映出用户之间的相似性\upcite{gonzalez2008understanding}。从用户的历史轨迹数据中所挖掘出的频繁模式和序列模式能够反映出用户的日常轨迹运动习惯和行为规律，运动模式在现实生活中表现为用户经常行走的路径序列，是用户轨迹数据规律的抽象表示。用户的日常运动模式在一定程度上代表了用户的个人喜好、意图以及活动模式，例如用户A经常下午去操场跑步，B周末经常去市区逛街等，当从一个更细的粒度甚至能够根据用户的用餐地点推测出用户的口味喜好等。本研究首先采用频繁模式挖掘算法来探寻用户的日常轨迹运动模式，然后根据计算用户运动模式之间的相似性得出人与人之间的关系强度。
\par (2) 如何基于用户WiFi感知数据度量关系强度
\par 随着无线网络的覆盖普及，WiFi已经覆盖了我们日常生活中的每个区域，例如在家中、在商场中、公交车等都能够随时便捷的接入WiFi。在使用WiFi进行网上活动的时候，WiFi所记录的信息也能够从网络空间维度反映出人们的活动轨迹，同时WiFi的数据交也是能够有助于探究人们现实生活中的交互行为，因此通过用户的日常WiFi数据也能够了解到人与人之间的社交关系以及计算用户之间的关系强度。在基于用户WiFi感知数据度量关系强度中，本文提出了从用户WiFi感知上下文环境出发，通过计算WiFi感知环境的差异性计算用户之间的相似性进而得到用户之间的关系强度，采用了一种区别于传统意义的计算方式，通过对WiFi数据进行数据结构的构建和模型化表示，结合图形学的分析理论，将WiFi相似性分析与图分析相结合，通过计算用户之间的日常WiFi数据之间的相似性分析人们之间的关系。
\par (3) 如何基于用户蓝牙感知数据度量关系强度
\par 随着通信技术的发展以及与局域网通信之间的融合，出现了许多支持近场通讯的标准如NFC、蓝牙等，而蓝牙模块在手机历经了几代更迭之后依然保留在手机中。用户手机之间的近场交互情况，对研究用户之间的交互以及用户的关系有着重要的作用。在现实生活中，用户设备之间的近场交互能够暗示出用户之间的交互，如蓝牙连接传输文件，NFC交互交换名片等。通过将收集到的用户蓝牙感知数据序列化，并且按照时间片分割进行拓扑图特征向量的构建和数据结构化表示，对用户之间的关系强度进行计算。
\par (4) 如何对三种独立数据源结果进行融合
\par 前文分别概要描述了针对每种不同的非社交感知数据做如何以及采用的计算方法来得出用户之间的关系情况，在分别对每种感知数据进行计算的基础上， 如何对每种计算方式内部的结果进行融合以及最后对三维数据的最终结果进行融合是一个非常重要的问题。基于DTW加权得到的空间距离表示用户轨迹的空间距离越小，用户之间的相似度越高关系强度越强；而基于运动模式的计算方式表明用户的轨迹运动模式越相似，说明用户之间的关系强度越强；基于WiFi和蓝牙感知数据的计算结果相似度越高，表明用户之间关系强度越强，参照集成学习的算法，对三层数据计算结果进行加权融合，输出最终关系强度的计算结果。
\section{论文结构}
本文的主要结构分为六章节，各章节的主要内容描述如下：
\par 第一章为绪论，主要讲述了本课题的研究背景、然后介绍了智能手机感知数据同社会关系以及感知数据同人际关系强度研究所解决的问题，最后在提出了本文的研究目的，以及本文所研究的基于三种主要非社交关系数据研究的主要内容，最后总结归纳，基于这三种主要研究内容，提出本文的组织结构。
\par 第二章主要描述了与本课题研究内容密切相关的前人研究成果，从最开始的轨迹数据处理中的滤波技术、停留点检测算法到最后的轨迹停留点聚类主要方法技术，并对相关技术进行了进一步分析；其次介绍了针对用户轨迹数据所采用的时间序列相似度计算所采用的常用距离算法以及各自的意义和优缺点；紧接着介绍了利用自然语言处理用户语义轨迹以及在自然语言处理用常用的计算文本相似性的相关技术，同时介绍了本文所采用快速计算文本相似性的方法，并且介绍了他们的不同之处；最后针对剩下的非社交数据介绍了关于WiFi和蓝牙在挖掘用户社会关系中的应用。

\par 第三章主要讲述了如何对多源感知数据进行结构化描述表示和关系强度的计算方法。针对用户的空间轨迹数据进行预处理，建模表示等技术。首先描述了轨迹滤波模块；%其次详细讲述了如何针对短时间窗口内的缺失轨迹数据进行智能补全；
然后对用户轨迹进行语义化；针对用户的WiFi数据和蓝牙数据主要描述了如何借助图形学的思路对数据进行建模和表示。
\par 第四章主要详细描述了针对三种非社交感知数据进行用户的关系强度计算。首先描述了RSMHD的计算框架；其次分别针对各个数据模块的计算流程工作进行有针对性的说明。最后分别描述了基于各个感知数据源的计算结果和结果的融合。
\par 第五章描述了本次研究所收集的用户数据集；最后展示了本研究的实验结果并进行分析。
\par 第六章对本研究课题进行了总结，并提出了对未来工作的展望。
